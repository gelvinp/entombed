[gd_scene load_steps=12 format=3 uid="uid://cbrk76w3ddjk"]

[ext_resource type="Material" uid="uid://blhud1ipv3306" path="res://assets/materials/tomb/smooth_stone.tres" id="1_84evo"]
[ext_resource type="Script" path="res://assets/scripts/puzzles/bridge/switch.gd" id="1_pchea"]
[ext_resource type="Material" uid="uid://ca258fvcf6bea" path="res://assets/materials/puzzles/prevention/table.tres" id="2_kapt0"]
[ext_resource type="Script" path="res://assets/scripts/puzzles/bridge/switch_interactable.gd" id="3_on7sd"]
[ext_resource type="AudioStream" uid="uid://bgye3r28y1ka" path="res://assets/sounds/switch.wav" id="5_h6321"]

[sub_resource type="ArrayMesh" id="ArrayMesh_bpd5i"]
_surfaces = [{
"aabb": AABB(-0.182605, -0.289688, -0.122917, 0.36521, 0.579375, 0.245843),
"format": 4097,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 3, 0, 1, 0, 0, 0, 2, 0, 3, 0, 2, 0, 7, 0, 3, 0, 2, 0, 6, 0, 7, 0, 6, 0, 5, 0, 7, 0, 6, 0, 4, 0, 5, 0, 4, 0, 1, 0, 5, 0, 4, 0, 0, 0, 1, 0, 2, 0, 4, 0, 6, 0, 2, 0, 0, 0, 4, 0, 7, 0, 1, 0, 3, 0, 7, 0, 5, 0, 1, 0),
"name": "Smooth Stone (Baked)",
"primitive": 3,
"vertex_count": 8,
"vertex_data": PackedByteArray(201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 61, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 61, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 189, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 189, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 61, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 61, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 189, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 189)
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_vmr2v"]
resource_name = "switch_Cube073"
_surfaces = [{
"aabb": AABB(-0.182605, -0.289688, -0.122917, 0.36521, 0.579375, 0.245843),
"attribute_data": PackedByteArray(120, 103, 151, 62, 26, 192, 199, 62, 84, 152, 221, 62, 95, 41, 77, 63, 119, 103, 151, 62, 205, 65, 112, 63, 44, 109, 34, 62, 26, 192, 199, 62, 39, 109, 34, 62, 205, 65, 112, 63, 170, 91, 176, 60, 95, 41, 77, 63, 120, 103, 151, 62, 129, 248, 6, 63, 84, 152, 221, 62, 240, 16, 42, 63, 120, 103, 151, 62, 129, 248, 6, 63, 42, 109, 34, 62, 129, 248, 6, 63, 42, 109, 34, 62, 129, 248, 6, 63, 170, 91, 176, 60, 239, 16, 42, 63, 119, 103, 151, 62, 95, 41, 77, 63, 119, 103, 151, 62, 95, 41, 77, 63, 119, 103, 151, 62, 95, 41, 77, 63, 41, 109, 34, 62, 95, 41, 77, 63, 41, 109, 34, 62, 95, 41, 77, 63, 41, 109, 34, 62, 95, 41, 77, 63, 120, 103, 151, 62, 240, 16, 42, 63, 120, 103, 151, 62, 240, 16, 42, 63, 120, 103, 151, 62, 240, 16, 42, 63, 42, 109, 34, 62, 240, 16, 42, 63, 42, 109, 34, 62, 240, 16, 42, 63, 42, 109, 34, 62, 240, 16, 42, 63),
"format": 4119,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 9, 0, 3, 0, 0, 0, 6, 0, 9, 0, 8, 0, 21, 0, 10, 0, 8, 0, 19, 0, 21, 0, 20, 0, 17, 0, 23, 0, 20, 0, 14, 0, 17, 0, 13, 0, 4, 0, 15, 0, 13, 0, 2, 0, 4, 0, 7, 0, 12, 0, 18, 0, 7, 0, 1, 0, 12, 0, 22, 0, 5, 0, 11, 0, 22, 0, 16, 0, 5, 0),
"material": ExtResource("1_84evo"),
"name": "Smooth Stone (Baked)",
"primitive": 3,
"vertex_count": 24,
"vertex_data": PackedByteArray(201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 61, 0, 0, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 61, 255, 127, 0, 0, 0, 0, 255, 191, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 61, 255, 127, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 61, 0, 0, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 61, 255, 127, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 61, 255, 127, 255, 255, 255, 255, 255, 191, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 189, 0, 0, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 189, 255, 127, 0, 0, 0, 0, 255, 191, 201, 252, 58, 190, 243, 81, 148, 190, 199, 187, 251, 189, 255, 255, 255, 255, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 189, 0, 0, 255, 127, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 189, 255, 255, 255, 255, 255, 127, 255, 127, 201, 252, 58, 190, 243, 81, 148, 62, 199, 187, 251, 189, 255, 127, 255, 255, 255, 255, 255, 191, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 61, 255, 127, 0, 0, 0, 0, 255, 191, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 61, 255, 127, 255, 127, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 61, 255, 255, 255, 127, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 61, 255, 127, 255, 127, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 61, 255, 127, 255, 255, 255, 255, 255, 191, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 61, 255, 255, 255, 127, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 189, 255, 127, 0, 0, 0, 0, 255, 191, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 189, 255, 255, 255, 255, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 190, 199, 187, 251, 189, 255, 255, 255, 127, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 189, 255, 255, 255, 255, 255, 127, 255, 127, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 189, 255, 127, 255, 255, 255, 255, 255, 191, 201, 252, 58, 62, 243, 81, 148, 62, 199, 187, 251, 189, 255, 255, 255, 127, 255, 127, 255, 127)
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_bpd5i")

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_bgr1x"]
data = PackedVector3Array(-0.1826, -0.2897, 0.1229, -0.1826, 0.2897, -0.1229, -0.1826, 0.2897, 0.1229, -0.1826, -0.2897, 0.1229, -0.1826, -0.2897, -0.1229, -0.1826, 0.2897, -0.1229, -0.1826, -0.2897, -0.1229, 0.1826, 0.2897, -0.1229, -0.1826, 0.2897, -0.1229, -0.1826, -0.2897, -0.1229, 0.1826, -0.2897, -0.1229, 0.1826, 0.2897, -0.1229, 0.1826, -0.2897, -0.1229, 0.1826, 0.2897, 0.1229, 0.1826, 0.2897, -0.1229, 0.1826, -0.2897, -0.1229, 0.1826, -0.2897, 0.1229, 0.1826, 0.2897, 0.1229, 0.1826, -0.2897, 0.1229, -0.1826, 0.2897, 0.1229, 0.1826, 0.2897, 0.1229, 0.1826, -0.2897, 0.1229, -0.1826, -0.2897, 0.1229, -0.1826, 0.2897, 0.1229, -0.1826, -0.2897, -0.1229, 0.1826, -0.2897, 0.1229, 0.1826, -0.2897, -0.1229, -0.1826, -0.2897, -0.1229, -0.1826, -0.2897, 0.1229, 0.1826, -0.2897, 0.1229, 0.1826, 0.2897, -0.1229, -0.1826, 0.2897, 0.1229, -0.1826, 0.2897, -0.1229, 0.1826, 0.2897, -0.1229, 0.1826, 0.2897, 0.1229, -0.1826, 0.2897, 0.1229)

[sub_resource type="ArrayMesh" id="ArrayMesh_cwtyu"]
_surfaces = [{
"aabb": AABB(-0.0789923, -0.247276, -0.349303, 0.157985, 0.355182, 0.457218),
"format": 4097,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 3, 0, 1, 0, 0, 0, 2, 0, 3, 0, 2, 0, 7, 0, 3, 0, 2, 0, 6, 0, 7, 0, 6, 0, 5, 0, 7, 0, 6, 0, 4, 0, 5, 0, 4, 0, 1, 0, 5, 0, 4, 0, 0, 0, 1, 0, 2, 0, 4, 0, 6, 0, 2, 0, 0, 0, 4, 0, 7, 0, 1, 0, 3, 0, 7, 0, 5, 0, 1, 0),
"name": "Table",
"primitive": 3,
"vertex_count": 8,
"vertex_data": PackedByteArray(184, 198, 161, 189, 92, 219, 236, 188, 143, 253, 220, 61, 184, 198, 161, 189, 143, 253, 220, 61, 92, 219, 236, 60, 184, 198, 161, 189, 4, 54, 125, 190, 38, 102, 138, 190, 184, 198, 161, 189, 161, 55, 226, 189, 212, 215, 178, 190, 184, 198, 161, 61, 92, 219, 236, 188, 143, 253, 220, 61, 184, 198, 161, 61, 143, 253, 220, 61, 92, 219, 236, 60, 184, 198, 161, 61, 4, 54, 125, 190, 38, 102, 138, 190, 184, 198, 161, 61, 161, 55, 226, 189, 212, 215, 178, 190)
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_rhjtv"]
resource_name = "switch_Cube074"
_surfaces = [{
"aabb": AABB(-0.0789923, -0.247276, -0.349303, 0.157985, 0.355182, 0.457218),
"attribute_data": PackedByteArray(240, 40, 212, 62, 169, 247, 1, 63, 80, 51, 115, 61, 192, 105, 166, 62, 136, 167, 123, 61, 116, 2, 22, 62, 59, 50, 1, 63, 82, 194, 214, 62, 239, 96, 27, 62, 208, 161, 110, 61, 254, 24, 169, 62, 0, 22, 119, 61, 240, 251, 166, 62, 204, 179, 213, 62, 211, 38, 23, 62, 70, 165, 212, 62, 240, 251, 166, 62, 204, 179, 213, 62, 118, 55, 213, 62, 204, 134, 168, 62, 118, 55, 213, 62, 204, 134, 168, 62, 254, 69, 214, 62, 140, 60, 26, 62, 225, 67, 25, 62, 128, 121, 114, 62, 225, 67, 25, 62, 128, 121, 114, 62, 225, 67, 25, 62, 128, 121, 114, 62, 239, 186, 117, 62, 128, 31, 24, 62, 239, 186, 117, 62, 128, 31, 24, 62, 239, 186, 117, 62, 128, 31, 24, 62, 225, 157, 115, 62, 70, 120, 167, 62, 225, 157, 115, 62, 70, 120, 167, 62, 225, 157, 115, 62, 70, 120, 167, 62, 119, 10, 168, 62, 140, 150, 116, 62, 119, 10, 168, 62, 140, 150, 116, 62, 119, 10, 168, 62, 140, 150, 116, 62),
"format": 4119,
"index_count": 36,
"index_data": PackedByteArray(0, 0, 9, 0, 3, 0, 0, 0, 6, 0, 9, 0, 8, 0, 21, 0, 10, 0, 8, 0, 19, 0, 21, 0, 20, 0, 17, 0, 23, 0, 20, 0, 14, 0, 17, 0, 13, 0, 4, 0, 15, 0, 13, 0, 2, 0, 4, 0, 7, 0, 12, 0, 18, 0, 7, 0, 1, 0, 12, 0, 22, 0, 5, 0, 11, 0, 22, 0, 16, 0, 5, 0),
"material": ExtResource("2_kapt0"),
"name": "Table",
"primitive": 3,
"vertex_count": 24,
"vertex_data": PackedByteArray(184, 198, 161, 189, 92, 219, 236, 188, 143, 253, 220, 61, 0, 0, 255, 127, 255, 127, 249, 226, 184, 198, 161, 189, 92, 219, 236, 188, 143, 253, 220, 61, 255, 127, 217, 46, 34, 219, 164, 141, 184, 198, 161, 189, 92, 219, 236, 188, 143, 253, 220, 61, 255, 127, 217, 174, 176, 208, 78, 229, 184, 198, 161, 189, 143, 253, 220, 61, 92, 219, 236, 60, 0, 0, 255, 127, 255, 127, 249, 226, 184, 198, 161, 189, 143, 253, 220, 61, 92, 219, 236, 60, 255, 127, 217, 174, 176, 208, 78, 229, 184, 198, 161, 189, 143, 253, 220, 61, 92, 219, 236, 60, 217, 174, 255, 255, 220, 36, 164, 141, 184, 198, 161, 189, 4, 54, 125, 190, 38, 102, 138, 190, 0, 0, 255, 127, 255, 127, 249, 226, 184, 198, 161, 189, 4, 54, 125, 190, 38, 102, 138, 190, 255, 127, 217, 46, 34, 219, 164, 141, 184, 198, 161, 189, 4, 54, 125, 190, 38, 102, 138, 190, 37, 209, 0, 0, 78, 47, 78, 229, 184, 198, 161, 189, 161, 55, 226, 189, 212, 215, 178, 190, 0, 0, 255, 127, 255, 127, 249, 226, 184, 198, 161, 189, 161, 55, 226, 189, 212, 215, 178, 190, 37, 209, 0, 0, 78, 47, 78, 229, 184, 198, 161, 189, 161, 55, 226, 189, 212, 215, 178, 190, 217, 174, 255, 255, 220, 36, 164, 141, 184, 198, 161, 61, 92, 219, 236, 188, 143, 253, 220, 61, 255, 127, 217, 46, 34, 219, 164, 141, 184, 198, 161, 61, 92, 219, 236, 188, 143, 253, 220, 61, 255, 127, 217, 174, 176, 208, 78, 229, 184, 198, 161, 61, 92, 219, 236, 188, 143, 253, 220, 61, 255, 255, 255, 127, 86, 237, 255, 127, 184, 198, 161, 61, 143, 253, 220, 61, 92, 219, 236, 60, 255, 127, 217, 174, 176, 208, 78, 229, 184, 198, 161, 61, 143, 253, 220, 61, 92, 219, 236, 60, 217, 174, 255, 255, 220, 36, 164, 141, 184, 198, 161, 61, 143, 253, 220, 61, 92, 219, 236, 60, 255, 255, 255, 127, 86, 237, 255, 127, 184, 198, 161, 61, 4, 54, 125, 190, 38, 102, 138, 190, 255, 127, 217, 46, 34, 219, 164, 141, 184, 198, 161, 61, 4, 54, 125, 190, 38, 102, 138, 190, 37, 209, 0, 0, 78, 47, 78, 229, 184, 198, 161, 61, 4, 54, 125, 190, 38, 102, 138, 190, 255, 255, 255, 127, 86, 237, 255, 127, 184, 198, 161, 61, 161, 55, 226, 189, 212, 215, 178, 190, 37, 209, 0, 0, 78, 47, 78, 229, 184, 198, 161, 61, 161, 55, 226, 189, 212, 215, 178, 190, 217, 174, 255, 255, 220, 36, 164, 141, 184, 198, 161, 61, 161, 55, 226, 189, 212, 215, 178, 190, 255, 255, 255, 127, 86, 237, 255, 127)
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_cwtyu")

[sub_resource type="BoxShape3D" id="BoxShape3D_hsia3"]
size = Vector3(0.663204, 1, 0.544948)

[node name="Switch" type="Node3D"]
script = ExtResource("1_pchea")

[node name="SwitchBody" type="MeshInstance3D" parent="."]
mesh = SubResource("ArrayMesh_vmr2v")
skeleton = NodePath("")

[node name="StaticBody3D" type="StaticBody3D" parent="SwitchBody"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SwitchBody/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_bgr1x")

[node name="SwitchLever" type="MeshInstance3D" parent="."]
mesh = SubResource("ArrayMesh_rhjtv")
skeleton = NodePath("")

[node name="Interactable" type="Area3D" parent="."]
collision_layer = 4
monitoring = false
script = ExtResource("3_on7sd")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.17905, 0)
shape = SubResource("BoxShape3D_hsia3")

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_h6321")
unit_size = 0.5

[connection signal="flipped" from="Interactable" to="." method="_on_interactable_flipped"]
